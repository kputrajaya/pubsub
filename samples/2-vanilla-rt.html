<html>
  <head>
    <title>Vanilla Real-Time</title>
    <link rel="stylesheet" href="style.css" />
    <script src="../sdk.js"></script>
  </head>
  <body>
    <div>Name: <input id="nameInput" type="text" value="Bob" /></div>
    <h2>Welcome, <span id="nameDisplay">Bob</span>!</h2>

    <script>
      (() => {
        const elNameInput = document.getElementById('nameInput');
        const elNameDisplay = document.getElementById('nameDisplay');

        const ps = new PubSub({
          host: 'ws://localhost:8075',
          appKey: 'sample',
          getData: () => ({
            name: elNameInput.value,
          }),
          setData: (v) => {
            elNameInput.value = v.name;
            elNameDisplay.innerText = v.name;
          },
        });

        elNameInput.oninput = (e) => {
          elNameDisplay.innerText = e.target.value;
          ps.pub();
        };
      })();
    </script>
  </body>
</html>
